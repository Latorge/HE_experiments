// .vscode/tasks.json
{
    "version": "2.0.0",
    "tasks": [
        {
            "label": "build exp_lib",
            "type": "shell",
            "command": "cmake",
            "args": [
                "--build",
                "${workspaceFolder}/build",
                "--target",
                "FrontClass"
            ],
            "group": {
                "kind": "build",
                "isDefault": true
            },
            "problemMatcher": [
                "$gcc"
            ],
            "detail": "Builds the KnotsSolver library"
        },
        {
            "label": "configure emscripten",
            "type": "shell",
            "command": "emcmake",
            "args": [
                "cmake",
                "-B",
                "build_em",
                "-DCMAKE_BUILD_TYPE=release"
            ],
            "group": {
                "kind": "build",
                "isDefault": false
            },
            "problemMatcher": [
                "$gcc"
            ],
            "detail": "Configures the project for Emscripten"
        },
        {
            "label": "configure emscripten2",
            "type": "shell",
            "command": "cmake",
            "args": [
                "-S", ".",
                "-B", "build_em",
                "-DCMAKE_BUILD_TYPE=Release",
                "-DCMAKE_TOOLCHAIN_FILE=path/to/emscripten.cmake"
            ],
            "group": {
                "kind": "build",
                "isDefault": false
            },
            "problemMatcher": [],
            "detail": "Configures the Emscripten build environment"
        }
,        
        {
            "label": "build emscripten",
            "type": "shell",
            "command": "cmake",
            "args": [
                "--build",
                "build_em",
                "--config",
                "release"
            ],
            "group": {
                "kind": "build",
                "isDefault": false
            },
            "problemMatcher": [
                "$gcc"
            ],
            "detail": "Builds the project with Emscripten"
        },
        {
            "label": "Generate TypeScript Definitions",
            "type": "shell",
            "command": "webidl-dts-gen",
            "args": [
                "-e",
                "-d",
                "-i",
                "./src/FrontClass.idl",
                "-o",
                "../../JS/project/src/streamlines/FrontClass.d.ts",
                "-n",
                "FrontClass"
            ],
            "options": {
                "env": {
                    "PATH": "${env:PATH}:/path/to/your/nodejs/bin"
                }
            },
            "problemMatcher": [],
            "group": "none"
        },
        {
            "label": "Copy Files to Dist",
            "type": "shell",
            "command": "cp",
            "args": [
                "./build_em/FrontClass.*",
                "../../JS/project/src/streamlines/"
            ],
            "group": "build",
            "problemMatcher": []
        },
        {
            "label": "Build TypeScript Definitions and Copy files",
            "dependsOrder": "sequence",
            "dependsOn": [
                "Generate TypeScript Definitions",
                "Copy Files to Dist"
            ]
        },
        {
            "label": "Build Emscripten and Copy files",
            "dependsOrder": "sequence",
            "dependsOn": [
                "build emscripten",
                "Copy Files to Dist"
            ],
            "problemMatcher": []
        }
    ]
}
